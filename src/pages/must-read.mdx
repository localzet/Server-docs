# Несколько важных вопросов, о которых должен знать разработчик

**1. Ограничения среды Windows**

В среде Windows один процесс Localzet Server поддерживает только 200+ подключений.
Нельзя использовать параметр count для многопроцессорной настройки под Windows.
Нельзя использовать команды status, stop, reload, restart и т.д. под Windows.
Невозможно запустить демон в фоновом режиме, после закрытия окна cmd служба останавливается.
Нельзя инициализировать несколько прослушивающих сокетов в одном файле.

Для Linux эти ограничения не действуют, поэтому рекомендуется использовать Linux в продакшене, а в качестве рабочего окружения можно выбрать и Windows.

**2. Localzet Server не зависит от Apache или Nginx**

Localzet Server сам по себе является контейнером, аналогичным Apache или Nginx, и может работать, если среда PHP нормально настроена.

**3. Localzet Server запускается из терминала**

Способ запуска аналогичен запуску Apache с помощью команды (в веб-пространстве его использовать нельзя). Экран запуска выглядит так:
![Запуск Localzet Server](/images/screen-start.png "Запуск Localzet Server")

**4. Для длительных соединений следует использовать механизм "Cердцебиения"**

Для длительных соединений обязательно использовать механизм "Cердцебиения". Это очень важно!!!
При длительном отсутствии обмена данными соединение может быть прервано!
<Button
    href="/heartbeat"
    variant="text"
    arrow="right"
    children="Подробнее о Сердцебиении"
/>


**5. Протокол клиента и сервера должны соответствовать для взаимодействия**

Это очень распространенная проблема среди разработчиков. Например, если клиент использует протокол WebSocket, то сервер должен также использовать протокол WebSocket (`new Server('websocket://0.0.0.0...')`), чтобы соединение могло быть установлено и обмен данными был возможен.
Не пытайтесь обратиться к порту протокола WebSocket через строку адреса браузера или использовать протокол WebSocket для доступа к порту протокола голого TCP – протоколы должны соответствовать!

Этот принцип подобен тому, что если вы хотите общаться с англичанином, вам нужно использовать английский язык, а для общения с русским – русский. Здесь язык подобен протоколу обмена данными - обе стороны (клиент и сервер) должны использовать один язык, чтобы быть способными взаимодействовать, в противном случае связь невозможна.

**6. Возможные причины сбоя соединения**

Одним из часто встречающихся проблем в начале использования Localzet Server является сбой соединения клиента с сервером.
Обычные причины таковы:
1. Брандмауэр сервера блокирует соединение (50% случаев).
2. Протоколы, используемые клиентом и сервером, не совпадают (30% случаев).
3. Неправильно указаны IP-адрес или порт (15% случаев).
4. Сервер не запущен.

**7. Не используйте операторы `exit`, `die` и `sleep`**

Использование операторов `exit` и `die` в бизнес-логике приведет к закрытию всего процесса и отображению ошибки `SERVER EXIT UNEXPECTED`.
Однако процесс будет немедленно перезапущен для продолжения обслуживания. Если нужно вернуть ответ, используйте оператор `return`.

Оператор `sleep` приостанавливает выполнение всего процесса, во время которого не выполняется никаких бизнес-операций, и работа фреймворка также останавливается,
что приводит к тому, что все запросы клиентов этого процесса остаются без обработки!

**8. Не используйте функцию `pcntl_fork`**

Функция `pcntl_fork` используется для динамического создания новых процессов.
Если в бизнес-коде используется `pcntl_fork`, это может привести к созданию родительского процесса,
который невозможно закрыть, что вызовет сбой бизнес-логики. Использование `pcntl_fork` в бизнес-коде также повлияет на обработку событий,
связанных с подключениями, сообщениями, закрытием соединений, таймерами и приведет к непредсказуемым сбоям.

**9. Не используйте бесконечные циклы в бизнес-коде**

Не следует использовать бесконечные циклы в бизнес-коде, в противном случае процесс не сможет передать управление Localzet Server
и он, как следствие, не сможет обрабатывать сообщения клиентов.

**10. Перезапускайте код после его изменения**

Localzet Server - это постоянный асинхронный фреймворк в памяти, поэтому для просмотра результатов изменений кода необходимо перезапустить его.

[//]  # (**11. Для применения длительных соединений рекомендуется использовать фреймворк MultiServer**)

[//]  # ()
[//]  # (Многие разработчики используют Localzet Server для создания приложений с **длительными соединениями**, такими как сообщения в реальном времени, )

[//]  # (интернет вещей и другие. Для этого рекомендуется использовать фреймворк MultiServer. )

[//]  # (Этот фреймворк делает процесс создания приложений с длительными соединениями на базе Localzet Server более простым и удобным.)

**\* Поддержка более высокой параллельности**

Если количество одновременных подключений к бизнес-приложению превышает 1000, обязательно [оптимизируйте ядро Linux](/appendices/kernel-optimization) и [установите расширение event](/appendices/install-extension).
